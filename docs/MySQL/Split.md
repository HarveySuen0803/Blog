# Split

MySQL 数据库的分库分表主要是为了应对大数据量或者高并发的场景, 分库分表存在分布式事务一致性的问题, 跨结点关联查询, 分页查询, 排序查询的问题, 主键避重的问题

单库无法承受当前的并发量, 请求量极高, 需要大量的计算和 IO 时, 就需要分库

单表数据量过大时 (eg: 单表的数据量达到 1000W 或 20G), 就需要拆分表

分库分表虽然可以拆分业务, 可以降低一定系统间的影响, 但是导致的问题太多, 非常难处理, 数据量没这么大时, 不要分库分表 !!!

# Split Database

水平分库, 将一个库的数据拆分到多个库中, 通过 Id 取模的方式路由到不同的库中

- eg: db_user 拆分成 db_user_0, db_user_1, db_user_2 三个库, 通过 id % 3 的方式选择不同的库进行访问

水平分表, 将一个表的数据拆分到多个表中, 通过 Id 取模的方式路由到不同的表中

- eg: tb_user 拆分成 tb_user_0, tb_user_1, tb_user_2 三个表, 通过 id % 3 的方式选择不同的表进行访问

# Split Table

垂直分库, 将一个库的表拆分到多个库中

- eg: db_service 拆分成 db_user, db_order, db_sku, 不同的业务访问不同的库

垂直分表, 将一个表的字段拆分到多个表中, 根据字段不同的访问频率进行冷热隔离

- eg: user(id, name, desc) 拆分成 user(id, name) 和 user_detail(id, desc)